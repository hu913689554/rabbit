{"remainingRequest":"G:\\基础文档\\Documents\\GitDemo\\rabbit\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js!G:\\基础文档\\Documents\\GitDemo\\rabbit\\vue-element-admin\\node_modules\\eslint-loader\\index.js??ref--13-0!G:\\基础文档\\Documents\\GitDemo\\rabbit\\vue-element-admin\\src\\permission.js","dependencies":[{"path":"G:\\基础文档\\Documents\\GitDemo\\rabbit\\vue-element-admin\\src\\permission.js","mtime":1646878236389},{"path":"G:\\基础文档\\Documents\\GitDemo\\rabbit\\vue-element-admin\\babel.config.js","mtime":1646385770904},{"path":"G:\\基础文档\\Documents\\GitDemo\\rabbit\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\基础文档\\Documents\\GitDemo\\rabbit\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\基础文档\\Documents\\GitDemo\\rabbit\\vue-element-admin\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRzovXHU1N0ZBXHU3ODQwXHU2NTg3XHU2ODYzL0RvY3VtZW50cy9HaXREZW1vL3JhYmJpdC92dWUtZWxlbWVudC1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJHOi9cdTU3RkFcdTc4NDBcdTY1ODdcdTY4NjMvRG9jdW1lbnRzL0dpdERlbW8vcmFiYml0L3Z1ZS1lbGVtZW50LWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi9yb3V0ZXInOwppbXBvcnQgc3RvcmUgZnJvbSAnLi9zdG9yZSc7CmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXVpJzsKaW1wb3J0IE5Qcm9ncmVzcyBmcm9tICducHJvZ3Jlc3MnOyAvLyBwcm9ncmVzcyBiYXIKCmltcG9ydCAnbnByb2dyZXNzL25wcm9ncmVzcy5jc3MnOyAvLyBwcm9ncmVzcyBiYXIgc3R5bGUKCmltcG9ydCB7IGdldFRva2VuIH0gZnJvbSAnQC91dGlscy9hdXRoJzsgLy8gZ2V0IHRva2VuIGZyb20gY29va2llCgppbXBvcnQgZ2V0UGFnZVRpdGxlIGZyb20gJ0AvdXRpbHMvZ2V0LXBhZ2UtdGl0bGUnOwppbXBvcnQgeyBhc3luY1JvdXRlcywgY29uc3RhbnRSb3V0ZXMgfSBmcm9tICdAL3JvdXRlcic7Ck5Qcm9ncmVzcy5jb25maWd1cmUoewogIHNob3dTcGlubmVyOiBmYWxzZQp9KTsgLy8gTlByb2dyZXNzIENvbmZpZ3VyYXRpb24KCnZhciB3aGl0ZUxpc3QgPSBbJy9sb2dpbicsICcvYXV0aC1yZWRpcmVjdCddOyAvLyBubyByZWRpcmVjdCB3aGl0ZWxpc3QKCnJvdXRlci5iZWZvcmVFYWNoKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHRvLCBmcm9tLCBuZXh0KSB7CiAgICB2YXIgaGFzVG9rZW4sIGhhc1JvbGVzLCBfeWllbGQkc3RvcmUkZGlzcGF0Y2gsIHJvbGVzLCBhY2Nlc3NSb3V0ZXMsIGk7CgogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAvLyBzdGFydCBwcm9ncmVzcyBiYXIKICAgICAgICAgICAgTlByb2dyZXNzLnN0YXJ0KCk7IC8vIHNldCBwYWdlIHRpdGxlCgogICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IGdldFBhZ2VUaXRsZSh0by5tZXRhLnRpdGxlKTsgLy8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHVzZXIgaGFzIGxvZ2dlZCBpbgoKICAgICAgICAgICAgaGFzVG9rZW4gPSBnZXRUb2tlbigpOwoKICAgICAgICAgICAgaWYgKCFoYXNUb2tlbikgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0MTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCEodG8ucGF0aCA9PT0gJy9sb2dpbicpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIGlmIGlzIGxvZ2dlZCBpbiwgcmVkaXJlY3QgdG8gdGhlIGhvbWUgcGFnZQogICAgICAgICAgICBuZXh0KHsKICAgICAgICAgICAgICBwYXRoOiAnLycKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIE5Qcm9ncmVzcy5kb25lKCk7IC8vIGhhY2s6IGh0dHBzOi8vZ2l0aHViLmNvbS9QYW5KaWFDaGVuL3Z1ZS1lbGVtZW50LWFkbWluL3B1bGwvMjkzOQoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM5OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIC8vIGRldGVybWluZSB3aGV0aGVyIHRoZSB1c2VyIGhhcyBvYnRhaW5lZCBoaXMgcGVybWlzc2lvbiByb2xlcyB0aHJvdWdoIGdldEluZm8KICAgICAgICAgICAgaGFzUm9sZXMgPSBzdG9yZS5nZXR0ZXJzLnJvbGVzICYmIHN0b3JlLmdldHRlcnMucm9sZXMubGVuZ3RoID4gMDsKCiAgICAgICAgICAgIGlmICghaGFzUm9sZXMpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM5OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTQ7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCd1c2VyL2dldEluZm8nKTsKCiAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICBfeWllbGQkc3RvcmUkZGlzcGF0Y2ggPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICByb2xlcyA9IF95aWVsZCRzdG9yZSRkaXNwYXRjaC5yb2xlczsKICAgICAgICAgICAgY29uc29sZS5sb2cocm9sZXMpOyAvLyBnZW5lcmF0ZSBhY2Nlc3NpYmxlIHJvdXRlcyBtYXAgYmFzZWQgb24gcm9sZXMKCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMjsKICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdwZXJtaXNzaW9uL2dlbmVyYXRlUm91dGVzJywgcm9sZXMpOwoKICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgIGFjY2Vzc1JvdXRlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCLmraPnoa7nmoQiKTsKICAgICAgICAgICAgY29uc29sZS5sb2coYWNjZXNzUm91dGVzKTsKICAgICAgICAgICAgaSA9IDA7CiAgICAgICAgICAgIGFjY2Vzc1JvdXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChhY2Nlc3NSb3V0ZSkgewogICAgICAgICAgICAgIGlmIChhY2Nlc3NSb3V0ZS5jaGlsZHJlbiAmJiBhY2Nlc3NSb3V0ZS5jaGlsZHJlbi5sZW5ndGggPT0gMSkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coYWNjZXNzUm91dGUpOyAvLyBjb25zb2xlLmxvZygi5ZCN56ewIithY2Nlc3NSb3V0ZS5jaGlsZHJlbi5tZXRhLnRpdGxlKQogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIuWbvuaghyIrYWNjZXNzUm91dGUuY2hpbGRyZW4ubWV0YS5pY29uKQogICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygi5Zyw5Z2AIithY2Nlc3NSb3V0ZS5wYXRoKQogICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygi5piv5ZCm57yT5a2YIithY2Nlc3NSb3V0ZS5jaGlsZHJlbi5tZXRhLm5vQ2FjaGUpCgogICAgICAgICAgICAgICAgaSsrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCLkuIDlhbEiICsgaSArICLmnaEiKTsgLy8gY29uc3QgYWNjZXNzUm91dGVzID0gYXN5bmNSb3V0ZXMuY29uY2F0KGNvbnN0YW50Um91dGVzKQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygi5rWL6K+VIikKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYWNjZXNzUm91dGVzKQogICAgICAgICAgICAvLyBkeW5hbWljYWxseSBhZGQgYWNjZXNzaWJsZSByb3V0ZXMKCiAgICAgICAgICAgIHJvdXRlci5hZGRSb3V0ZXMoYWNjZXNzUm91dGVzKTsgLy8gaGFjayBtZXRob2QgdG8gZW5zdXJlIHRoYXQgYWRkUm91dGVzIGlzIGNvbXBsZXRlCiAgICAgICAgICAgIC8vIHNldCB0aGUgcmVwbGFjZTogdHJ1ZSwgc28gdGhlIG5hdmlnYXRpb24gd2lsbCBub3QgbGVhdmUgYSBoaXN0b3J5IHJlY29yZAoKICAgICAgICAgICAgbmV4dChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRvKSwge30sIHsKICAgICAgICAgICAgICByZXBsYWNlOiB0cnVlCiAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM5OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMzI7CiAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMTQpOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzY7CiAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgndXNlci9yZXNldFRva2VuJyk7CgogICAgICAgICAgY2FzZSAzNjoKICAgICAgICAgICAgTWVzc2FnZS5lcnJvcihfY29udGV4dC50MCB8fCAnSGFzIEVycm9yJyk7CiAgICAgICAgICAgIG5leHQoIi9sb2dpbj9yZWRpcmVjdD0iLmNvbmNhdCh0by5wYXRoKSk7CiAgICAgICAgICAgIE5Qcm9ncmVzcy5kb25lKCk7CgogICAgICAgICAgY2FzZSAzOToKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQyOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDQxOgogICAgICAgICAgICAvKiBoYXMgbm8gdG9rZW4qLwogICAgICAgICAgICBpZiAod2hpdGVMaXN0LmluZGV4T2YodG8ucGF0aCkgIT09IC0xKSB7CiAgICAgICAgICAgICAgLy8gaW4gdGhlIGZyZWUgbG9naW4gd2hpdGVsaXN0LCBnbyBkaXJlY3RseQogICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyBvdGhlciBwYWdlcyB0aGF0IGRvIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gYWNjZXNzIGFyZSByZWRpcmVjdGVkIHRvIHRoZSBsb2dpbiBwYWdlLgogICAgICAgICAgICAgIG5leHQoIi9sb2dpbj9yZWRpcmVjdD0iLmNvbmNhdCh0by5wYXRoKSk7CiAgICAgICAgICAgICAgTlByb2dyZXNzLmRvbmUoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgIGNhc2UgNDI6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSwgbnVsbCwgW1sxNCwgMzJdXSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIsIF94MykgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCkpOwpyb3V0ZXIuYWZ0ZXJFYWNoKGZ1bmN0aW9uICgpIHsKICAvLyBmaW5pc2ggcHJvZ3Jlc3MgYmFyCiAgTlByb2dyZXNzLmRvbmUoKTsKfSk7"},{"version":3,"sources":["G:/基础文档/Documents/GitDemo/rabbit/vue-element-admin/src/permission.js"],"names":["router","store","Message","NProgress","getToken","getPageTitle","asyncRoutes","constantRoutes","configure","showSpinner","whiteList","beforeEach","to","from","next","start","document","title","meta","hasToken","path","done","hasRoles","getters","roles","length","dispatch","console","log","accessRoutes","i","forEach","accessRoute","children","addRoutes","replace","error","indexOf","afterEach"],"mappings":"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","sourcesContent":["import router from './router'\r\nimport store from './store'\r\nimport { Message } from 'element-ui'\r\nimport NProgress from 'nprogress' // progress bar\r\nimport 'nprogress/nprogress.css' // progress bar style\r\nimport { getToken } from '@/utils/auth' // get token from cookie\r\nimport getPageTitle from '@/utils/get-page-title'\r\nimport { asyncRoutes, constantRoutes } from '@/router'\r\n\r\nNProgress.configure({ showSpinner: false }) // NProgress Configuration\r\n\r\nconst whiteList = ['/login', '/auth-redirect'] // no redirect whitelist\r\n\r\nrouter.beforeEach(async(to, from, next) => {\r\n  // start progress bar\r\n  NProgress.start()\r\n\r\n  // set page title\r\n  document.title = getPageTitle(to.meta.title)\r\n\r\n  // determine whether the user has logged in\r\n  const hasToken = getToken()\r\n\r\n  if (hasToken) {\r\n    if (to.path === '/login') {\r\n      // if is logged in, redirect to the home page\r\n      next({ path: '/' })\r\n      NProgress.done() // hack: https://github.com/PanJiaChen/vue-element-admin/pull/2939\r\n    } else {\r\n      // determine whether the user has obtained his permission roles through getInfo\r\n      const hasRoles = store.getters.roles && store.getters.roles.length > 0\r\n      if (hasRoles) {\r\n        next()\r\n      } else {\r\n        try {\r\n          // get user info\r\n          // note: roles must be a object array! such as: ['admin'] or ,['developer','editor']\r\n         \r\n          const { roles } = await store.dispatch('user/getInfo')\r\n          console.log(roles)\r\n          // generate accessible routes map based on roles\r\n\r\n          const accessRoutes = await store.dispatch('permission/generateRoutes', roles)\r\n          console.log(\"正确的\")\r\n      console.log(accessRoutes)\r\n      let i=0\r\n      accessRoutes.forEach(accessRoute=>{\r\n       \r\n        if(accessRoute.children&&accessRoute.children.length==1){\r\n          console.log(accessRoute)\r\n          // console.log(\"名称\"+accessRoute.children.meta.title)\r\n          // console.log(\"图标\"+accessRoute.children.meta.icon)\r\n          //console.log(\"地址\"+accessRoute.path)\r\n          //console.log(\"是否缓存\"+accessRoute.children.meta.noCache)\r\n          i++\r\n        }\r\n       \r\n        \r\n      })\r\n      console.log(\"一共\"+i+\"条\")\r\n          // const accessRoutes = asyncRoutes.concat(constantRoutes)\r\n          // console.log(\"测试\")\r\n          // console.log(accessRoutes)\r\n\r\n          // dynamically add accessible routes\r\n          router.addRoutes(accessRoutes)\r\n\r\n          // hack method to ensure that addRoutes is complete\r\n          // set the replace: true, so the navigation will not leave a history record\r\n          next({ ...to, replace: true })\r\n        } catch (error) {\r\n          // remove token and go to login page to re-login\r\n          await store.dispatch('user/resetToken')\r\n          Message.error(error || 'Has Error')\r\n          next(`/login?redirect=${to.path}`)\r\n          NProgress.done()\r\n        }\r\n      }\r\n    }\r\n  } else {\r\n    /* has no token*/\r\n\r\n    if (whiteList.indexOf(to.path) !== -1) {\r\n      // in the free login whitelist, go directly\r\n      next()\r\n    } else {\r\n      // other pages that do not have permission to access are redirected to the login page.\r\n      next(`/login?redirect=${to.path}`)\r\n      NProgress.done()\r\n    }\r\n  }\r\n})\r\n\r\nrouter.afterEach(() => {\r\n  // finish progress bar\r\n  NProgress.done()\r\n})\r\n"]}]}